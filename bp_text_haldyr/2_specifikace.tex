\chapter{Popis problému, specifikace cíle}

% \begin{itemize}
% \item Popis řešeného problému, vymezení cílů DP/BP a~požadavků na implementovaný systém.
% \item Popis struktury DP/BP ve vztahu k~vytyčeným cílům.
% \item Rešeršní zpracování existujících implementací, pokud jsou známy.
% \end{itemize}

Nejdříve bylo potřeba zjistit přesné požadavky, tedy co všechno má být tímto simulátorem podporováno. Virtuální síť musí podporovat několik k sobě připojených počítačů (Linux nebo Cisco, vymezení práce viz \ref{vymezeni}). Limit připojených počítačů nebyl v zadání určen, nicméně se počítá s tím, že systém zvládne desítky až stovky počítačů (viz Zátěžové testy), ačkoliv v praxi jich většinou nebude potřeba více než deset. Systém umožní nakonfigurování rozhraní potřebných pro propojení sítě včetně příkazu pro zapínání a vypínaní rozhraní. Dále aplikace musí umožnit správu směrovací tabulky pomocí příkazů Cisco IOS. V předmětu Y36PSI se také požaduje po studentech, aby rozuměli tzv. \uv{natování} neboli překlad adres - NAT\footnote{Network Address Translation}. Cisco podporuje hned několik druhů překladu adres. Pro tuto aplikaci jsem zvolil tři způsoby, které se zkoušely na cvičeních: statický překlad, dynamický překlad a dynamický překlad s metodou overloading. Dále systém musí být schopen načíst a posléze zase uložit celou konfiguraci do souboru. Funkčnost celého řešení musí být ověřitelná příkazy ping a traceroute.

% Navrhněte a~implementujte aplikaci, která umožní vytvoření virtuální počítačové sítě, pro potřeby předmětu Y36PSI. Na
% systém se bude možno připojit s~pomocí telnetu. Z~pohledu uživatele se bude systém tvářit jako reálná síť. Zaměřte se
% především na konfiguraci systému Cisco. Systém bude podporovat příkazy potřebné ke konfiguraci síťových rozhraní,
% směrování a~překladu adres. Pro ověření správnosti konfigurace implementujte příkaz ping a~traceroute.
\section{Shrnutí funkčních požadavků}
\begin{enumerate}
 \item Vytvoření počítačové sítě založené na směrovačích firmy Cisco Systems.
 \item Systém musí umožnit konfiguraci rozhraní.
 \item Systém musí obsahovat funkční směrování.
 \item Systém musí implementovat překlad adres
 \item Systém musí podporovat ukládání a načítání do/ze souboru.
 \item Pro ověření správnosti musí být implementován příkazy ping a traceroute.
 \item K jednotlivým počítačům aplikace se připojuje pomocí telnetu.
\end{enumerate}

\section{Nefunkční požadavky}
\begin{enumerate}
 \item Aplikace bude multiplatformní - alespoň pro OS\footnote{Operační systém} Windows a Linux
 \item Aplikace musí být spustitelná na běžném\footnote{Slovem \uv{běžné} se myslí v podstatě jakýkoliv počítač, na kterém je možné nainstalovat prostředí Javy - Java Runtime Environment} studentském počítači.
 \item Systém by měl být co nejvěrnější kopií reálného Cisca v mezích zadání.
\end{enumerate}


\section{Vymezení práce} \label{vymezeni}
% Tady bude napsáno, co kdo udělal, jak jsme to uvařili - RT a já na to Wrapper, routovani - metody PC, já NAT, nacitani
Jak už jsem zmínil v první kapitole \ref{uvod}, práce byla rozdělena na dvě samostatné bakalářské práce. Rozdělení dle typu počítačů na Linux a Cisco se ukázalo jako správná volba, nicméně bylo potřeba dořešit několik věcí. Hned po započatí prací jsem zjistil, že v některých věcech budu muset více spolupracovat s kolegou, protože se týkaly obou našich implementací. Např. směrovací tabulka na Linuxu a Ciscu se chová téměř úplně stejně, dokonce se podle ní i stejně směruje. Celé to má ale malý háček: Cisco má totiž de facto tabulky dvě! První je tvořena příkazy, které zadal uživatel a druhá je vypočítávána z tabulky první. Já jsem tedy použil směrovací tabulku od kolegy, která byla primárně programována pro Linux, a tu jsem zaobalil do tzv. wrapperu, který ji ovládá a sám přidává funkcionalitu tabulky druhé. 

Směrování probíhá stejně na obou systémech, liší se však pravidla pro příjem paketů. Já jsem tedy pouze navázal na kolegovu implementaci tím, že jsem přidal metodu pro příjem paketů (bude detailněji vysvětleno v kapitole Realizace). Díky tomu, že Cisco má svůj překlad adres natolik robustní (díky svým rozsáhlým datovým strukturám), tak se nechalo s menšími úpravami (přidáním několika metod) použít pro linuxový příkaz \verb|iptables|. 

Mojí prací je také načítání a ukládání do souboru, startovací skripty pro server i klienty. Co jsem si ale nechal nakonec, jsou různé datové struktury pro jádro celého systému. Na těch jsem spolupracoval s kolegou nejvíce, protože musely odrážet situaci na obou systémech. Např. třída zaštiťující IP adresu je z půlky má a z půlky kolegy. Obvykle je u třídy napsáno, kdo je jejím autorem, zde je to přímo rozlišováno v jednotlivých metodách. Pak je v hlavičce třídy poznámka, že jsme se podíleli oba. Jinde je celá datová struktura kolegy a moje jsou pouze 2-3 metody. Dále síťová část je výsledkem společné práce\footnote{Dle tehdejších pravidel jsme mohli programovací úlohy implementovat a odevzdávat ve dvojicích.} z roku 2008, kdy jsme právě pro předmět Počítačové sítě programovali hru Karel.

% TODO: pridat odkaz na realizaci prijmiEthernetove()

\section{Existující implementace}
Tady budou zpracovány existující implementace. Když to bude moc dlouhé, tak to dám do extra kapitoly.

Cisco packet tracer, OMNeT++ simulator a další.









